(function(y,A){typeof exports=="object"&&typeof module!="undefined"?A(exports,require("mqtt/dist/mqtt"),require("msgpack5/dist/msgpack5")):typeof define=="function"&&define.amd?define(["exports","mqtt/dist/mqtt","msgpack5/dist/msgpack5"],A):(y=typeof globalThis!="undefined"?globalThis:y||self,A(y.VoerkaMessager={},y.mqtt,y.msgpack5))})(this,function(y,A,T){"use strict";var Fn=Object.defineProperty,Pn=Object.defineProperties;var Vn=Object.getOwnPropertyDescriptors;var _e=Object.getOwnPropertySymbols;var Lt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable;var Ut=(y,A,T)=>A in y?Fn(y,A,{enumerable:!0,configurable:!0,writable:!0,value:T}):y[A]=T,V=(y,A)=>{for(var T in A||(A={}))Lt.call(A,T)&&Ut(y,T,A[T]);if(_e)for(var T of _e(A))Ft.call(A,T)&&Ut(y,T,A[T]);return y},j=(y,A)=>Pn(y,Vn(A));var ye=(y,A)=>{var T={};for(var N in y)Lt.call(y,N)&&A.indexOf(N)<0&&(T[N]=y[N]);if(y!=null&&_e)for(var N of _e(y))A.indexOf(N)<0&&Ft.call(y,N)&&(T[N]=y[N]);return T};function N(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var Pt=N(A),Vt=N(T);function m(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function I(t){return function e(r){return arguments.length===0||m(r)?e:t.apply(this,arguments)}}function k(t){return function e(r,n){switch(arguments.length){case 0:return e;case 1:return m(r)?e:I(function(i){return t(r,i)});default:return m(r)&&m(n)?e:m(r)?I(function(i){return t(i,n)}):m(n)?I(function(i){return t(r,i)}):t(r,n)}}}function Ue(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(r){return e.apply(this,arguments)};case 2:return function(r,n){return e.apply(this,arguments)};case 3:return function(r,n,i){return e.apply(this,arguments)};case 4:return function(r,n,i,o){return e.apply(this,arguments)};case 5:return function(r,n,i,o,a){return e.apply(this,arguments)};case 6:return function(r,n,i,o,a,s){return e.apply(this,arguments)};case 7:return function(r,n,i,o,a,s,d){return e.apply(this,arguments)};case 8:return function(r,n,i,o,a,s,d,c){return e.apply(this,arguments)};case 9:return function(r,n,i,o,a,s,d,c,p){return e.apply(this,arguments)};case 10:return function(r,n,i,o,a,s,d,c,p,f){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function se(t){return function e(r,n,i){switch(arguments.length){case 0:return e;case 1:return m(r)?e:k(function(o,a){return t(r,o,a)});case 2:return m(r)&&m(n)?e:m(r)?k(function(o,a){return t(o,n,a)}):m(n)?k(function(o,a){return t(r,o,a)}):I(function(o){return t(r,n,o)});default:return m(r)&&m(n)&&m(i)?e:m(r)&&m(n)?k(function(o,a){return t(o,a,i)}):m(r)&&m(i)?k(function(o,a){return t(o,n,a)}):m(n)&&m(i)?k(function(o,a){return t(r,o,a)}):m(r)?I(function(o){return t(o,n,i)}):m(n)?I(function(o){return t(r,o,i)}):m(i)?I(function(o){return t(r,n,o)}):t(r,n,i)}}}var Le=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function Fe(t){return Object.prototype.toString.call(t)==="[object String]"}var xt=I(function(e){return Le(e)?!0:!e||typeof e!="object"||Fe(e)?!1:e.nodeType===1?!!e.length:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),jt=xt,$t=function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,r){return this.f(e,r)},t}();function Bt(t){return new $t(t)}var Gt=k(function(e,r){return Ue(e.length,function(){return e.apply(r,arguments)})}),qt=Gt;function Wt(t,e,r){for(var n=0,i=r.length;n<i;){if(e=t["@@transducer/step"](e,r[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return t["@@transducer/result"](e)}function Pe(t,e,r){for(var n=r.next();!n.done;){if(e=t["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=r.next()}return t["@@transducer/result"](e)}function Ve(t,e,r,n){return t["@@transducer/result"](r[n](qt(t["@@transducer/step"],t),e))}var xe=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator";function Yt(t,e,r){if(typeof t=="function"&&(t=Bt(t)),jt(r))return Wt(t,e,r);if(typeof r["fantasy-land/reduce"]=="function")return Ve(t,e,r,"fantasy-land/reduce");if(r[xe]!=null)return Pe(t,e,r[xe]());if(typeof r.next=="function")return Pe(t,e,r);if(typeof r.reduce=="function")return Ve(t,e,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}function $(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var je=Object.prototype.toString,Ht=function(){return je.call(arguments)==="[object Arguments]"?function(e){return je.call(e)==="[object Arguments]"}:function(e){return $("callee",e)}}(),Jt=Ht,Kt=!{toString:null}.propertyIsEnumerable("toString"),$e=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Be=function(){return arguments.propertyIsEnumerable("length")}(),zt=function(e,r){for(var n=0;n<e.length;){if(e[n]===r)return!0;n+=1}return!1},Qt=I(typeof Object.keys=="function"&&!Be?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var r,n,i=[],o=Be&&Jt(e);for(r in e)$(r,e)&&(!o||r!=="length")&&(i[i.length]=r);if(Kt)for(n=$e.length-1;n>=0;)r=$e[n],$(r,e)&&!zt(i,r)&&(i[i.length]=r),n-=1;return i}),Ge=Qt,Xt=k(function(e,r){var n=e<0?r.length+e:e;return Fe(r)?r.charAt(n):r[n]}),Zt=Xt,er=I(function(e){return e==null}),tr=er,rr=I(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),qe=rr;function We(t,e){return function(){var r=arguments.length;if(r===0)return e();var n=arguments[r-1];return Le(n)||typeof n[t]!="function"?e.apply(this,arguments):n[t].apply(n,Array.prototype.slice.call(arguments,0,r-1))}}var nr=se(We("slice",function(e,r,n){return Array.prototype.slice.call(n,e,r)})),ir=nr,or=I(We("tail",ir(1,1/0))),sr=or,ur=Zt(0),ar=ur;function cr(t){return t}var fr=I(cr),lr=fr,pr=k(function(e,r){if(r.length<=0)return lr;var n=ar(r),i=sr(r);return Ue(n.length,function(){return Yt(function(o,a){return e.call(this,a,o)},n.apply(this,arguments),i)})}),dr=pr;function Ye(t){for(var e=[],r;!(r=t.next()).done;)e.push(r.value);return e}function He(t,e,r){for(var n=0,i=r.length;n<i;){if(t(e,r[n]))return!0;n+=1}return!1}function hr(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function vr(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var ge=typeof Object.is=="function"?Object.is:vr;function Je(t,e,r,n){var i=Ye(t),o=Ye(e);function a(s,d){return Ee(s,d,r.slice(),n.slice())}return!He(function(s,d){return!He(a,d,s)},o,i)}function Ee(t,e,r,n){if(ge(t,e))return!0;var i=qe(t);if(i!==qe(e)||t==null||e==null)return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(i){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&hr(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&ge(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!ge(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var o=r.length-1;o>=0;){if(r[o]===t)return n[o]===e;o-=1}switch(i){case"Map":return t.size!==e.size?!1:Je(t.entries(),e.entries(),r.concat([t]),n.concat([e]));case"Set":return t.size!==e.size?!1:Je(t.values(),e.values(),r.concat([t]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=Ge(t);if(a.length!==Ge(e).length)return!1;var s=r.concat([t]),d=n.concat([e]);for(o=a.length-1;o>=0;){var c=a[o];if(!($(c,e)&&Ee(e[c],t[c],s,d)))return!1;o-=1}return!0}var _r=k(function(e,r){return Ee(e,r,[],[])}),Ke=_r;function ze(t){return Object.prototype.toString.call(t)==="[object Object]"}var yr=se(function(e,r,n){var i={},o;for(o in r)$(o,r)&&(i[o]=$(o,n)?e(o,r[o],n[o]):r[o]);for(o in n)$(o,n)&&!$(o,i)&&(i[o]=n[o]);return i}),Qe=yr,gr=se(function t(e,r,n){return Qe(function(i,o,a){return ze(o)&&ze(a)?t(e,o,a):e(i,o,a)},r,n)}),Er=gr,br=k(function(e,r){return Er(function(n,i,o){return o},e,r)}),W=br,mr=se(function(e,r,n){return Qe(function(i,o,a){return e(o,a)},r,n)}),Sr=mr,Ar=k(function(e,r){for(var n={},i=0;i<e.length;)e[i]in r&&(n[e[i]]=r[e[i]]),i+=1;return n}),Or=Ar,Tr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Xe={exports:{}};(function(t){(function(e,r,n){t.exports?t.exports=n():r[e]=n()})("Args",Tr,function(){Array.isArray||(Array.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"});var r=function(u){var l={};l.defValue=void 0,l.typeValue=void 0,l.customCheck=void 0;for(var h in u)!u.hasOwnProperty(h)||(h==="_default"?l.defValue=u[h]:h==="_type"?l.typeValue=u[h]:h==="_check"?l.customCheck=u[h]:l.sname=h);if(l.sarg=u[l.sname],typeof l.customCheck=="object"&&l.customCheck instanceof RegExp){var v=l.customCheck;l.customCheck=function(_){return!!_.toString().match(v)}}return l},n=function(u,l){var h=!1;return((l.sarg&f.ANY)!==0||(l.sarg&f.STRING)!==0&&typeof u=="string"||(l.sarg&f.FUNCTION)!==0&&typeof u=="function"||(l.sarg&f.INT)!==0&&typeof u=="number"&&Math.floor(u)===u||(l.sarg&f.FLOAT)!==0&&typeof u=="number"||(l.sarg&f.ARRAY)!==0&&Array.isArray(u)||((l.sarg&f.OBJECT)!==0||l.typeValue!==void 0)&&typeof u=="object"&&(l.typeValue===void 0||u instanceof l.typeValue)||(l.sarg&f.ARRAY_BUFFER)!==0&&u.toString().match(/ArrayBuffer/)||(l.sarg&f.DATE)!==0&&u instanceof Date||(l.sarg&f.BOOL)!==0&&typeof u=="boolean"||(l.sarg&f.DOM_EL)!==0&&(u instanceof HTMLElement||window.$!==void 0&&u instanceof window.$))&&(h=!0),l.customCheck!==void 0&&typeof l.customCheck=="function"&&(l.customCheck(u)?h=!0:h=!1),h},i=function(u){return(u.sarg&(f.ANY|f.STRING|f.FUNCTION|f.INT|f.FLOAT|f.OBJECT|f.ARRAY_BUFFER|f.DATE|f.BOOL|f.DOM_EL|f.ARRAY))!=0||u.typeValue!==void 0},o=function(u){var l=u.sarg,h=u.typeValue,v=u.customCheck;return(l&f.STRING)!==0?"String":(l&f.FUNCTION)!==0?"Function":(l&f.INT)!==0?"Int":(l&f.FLOAT)!==0?"Float":(l&f.ARRAY)!==0?"Array":(l&f.OBJECT)!==0?h!==void 0?"Object ("+h.toString()+")":"Object":(l&f.ARRAY_BUFFER)!==0?"Arry Buffer":(l&f.DATE)!==0?"Date":(l&f.BOOL)!==0?"Bool":(l&f.DOM_EL)!==0?"DOM Element":v!==void 0?"[Custom checker]":"unknown"},a=function(u,l,h){for(var v=!1,_=0;_<l.length;_++){var g=function(F){var w=!1;for(var U in u){var D=u[U];if(U===F.sname&&n(D,F)){h[U]=D,w=!0;break}}return w}(r(l[_]));g&&l.splice(_--,1),v|=g}return v},s=function(u,l){return!u||!l?!1:(u.sarg&~(f.Optional|f.Required))===(l.sarg&~(f.Optional|f.Required))&&u.typeValue===l.typeValue},d=function(u){return!c(u)},c=function(u){return(u&f.Optional)!==0},p=function(u,l,h){var v="";if(i(u))v="Argument "+l+" ("+u.sname+") should be type "+o(u)+", but it was type "+typeof h+" with value "+h+".";else if(u.customCheck!==void 0){var _=u.customCheck.toString();_.length>50&&(_=_.substr(0,40)+"..."+_.substr(_.length-10)),v="Argument "+l+" ("+u.sname+") does not pass the custom check ("+_+")."}else v="Argument "+l+" ("+u.sname+") has no valid type specified.";return v},f=function(u,l){if(u===void 0)throw new Error("The scheme has not been passed.");if(l===void 0)throw new Error("The arguments have not been passed.");l=Array.prototype.slice.call(l,0);var h={},v=void 0,_=void 0,g=[],F=function(E){(!_||!s(_,E)||d(_.sarg)&&c(E.sarg))&&(g=[]),(g.length>0||c(E.sarg))&&(_=E,g.push(E))},w=function(E,Z,S){if(S===void 0&&(S=g.length-1),!(S<0)){var P=g[S],q=h[P.sname];if(n(q,E))h[E.sname]=q,h[P.sname]=P.defValue||void 0,(P.sarg&f.Optional)===0&&w(P,Z,S-1);else return p(E,Z,q)}},U,D,G=l[l.length-1];for(G!==null&&typeof G=="object"&&G.constructor===Object&&a(l[l.length-1],u,h)&&l.splice(l.length-1,1),U=0,D=0;D<u.length&&(U=function(E,Z){var S=l[E];if(u[Z]instanceof Array){for(var P=u[Z],q=void 0,kt=!1,J=0;J<P.length;J++){var Mt=P[J];if(Mt===f.Optional)kt=!0;else{var b=r(Mt);n(S,b)&&(q=b.sname)}}if(q===void 0&&!kt){if(S==null)return v="Argument "+E+" is null or undefined but it must be not null.",E;v="Argument "+E+" should be one of: ";for(var J=0;J<P.length;J++){var b=r(P[J]);v+=o(b)+", "}return v+="but it was type "+typeof S+" with value "+S+".",E}else if(q!==void 0)return h[q]=S,E+1}else{var b=r(u[Z]);if((b.sarg&f.Optional)!==0){if(S==null)return b.defValue!==void 0?h[b.sname]=b.defValue:h[b.sname]=S,E+1;if(n(S,b))return h[b.sname]=S,F(b),E+1;if(b.defValue!==void 0)return h[b.sname]=b.defValue,E}else{if(S==null)return i(b)&&s(b,_)?(v=w(b,E),v===""&&F(b),E):(v="Argument "+E+" ("+b.sname+") is null or undefined but it must be not null.",E);if(n(S,b))return h[b.sname]=S,F(b),E+1;if(i(b)&&s(b,_)){if(v=w(b,E),v==="")return F(b),E+1}else v=p(b,E,S);return E}}return E}(U,D),!v);D++);if(v)throw new Error(v);return h};return f.ANY=1,f.STRING=1<<1,f.FUNCTION=1<<2,f.INT=1<<3,f.FLOAT=1<<4,f.ARRAY_BUFFER=1<<5,f.OBJECT=1<<6,f.DATE=1<<7,f.BOOL=1<<8,f.DOM_EL=1<<9,f.ARRAY=1<<10,f.Optional=1<<11,f.NotNull=f.Required=1<<12,f})})(Xe);var x=Xe.exports,be=function(t,e){return be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},be(t,e)};function ee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");be(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Rr(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(p){try{c(n.next(p))}catch(f){a(f)}}function d(p){try{c(n.throw(p))}catch(f){a(f)}}function c(p){p.done?o(p.value):i(p.value).then(s,d)}c((n=n.apply(t,e||[])).next())})}function Ze(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(p){return d([c,p])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(p){c=[6,p],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function K(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function re(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function z(t){return this instanceof z?(this.v=t,this):new z(t)}function Ir(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(u){n[u]&&(i[u]=function(l){return new Promise(function(h,v){o.push([u,l,h,v])>1||s(u,l)})})}function s(u,l){try{d(n[u](l))}catch(h){f(o[0][3],h)}}function d(u){u.value instanceof z?Promise.resolve(u.value.v).then(c,p):f(o[0][2],u)}function c(u){s("next",u)}function p(u){s("throw",u)}function f(u,l){u(l),o.shift(),o.length&&s(o[0][0],o[0][1])}}function Cr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof K=="function"?K(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(s,d){a=t[o](a),i(s,d,a.done,a.value)})}}function i(o,a,s,d){Promise.resolve(d).then(function(c){o({value:c,done:s})},a)}}function O(t){return typeof t=="function"}function et(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var me=et(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Se(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var ue=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=K(a),d=s.next();!d.done;d=s.next()){var c=d.value;c.remove(this)}}catch(v){e={error:v}}finally{try{d&&!d.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}else a.remove(this);var p=this.initialTeardown;if(O(p))try{p()}catch(v){o=v instanceof me?v.errors:[v]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var u=K(f),l=u.next();!l.done;l=u.next()){var h=l.value;try{nt(h)}catch(v){o=o!=null?o:[],v instanceof me?o=re(re([],te(o)),te(v.errors)):o.push(v)}}}catch(v){n={error:v}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}if(o)throw new me(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)nt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Se(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&Se(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),tt=ue.EMPTY;function rt(t){return t instanceof ue||t&&"closed"in t&&O(t.remove)&&O(t.add)&&O(t.unsubscribe)}function nt(t){O(t)?t():t.unsubscribe()}var ae={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ce={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=ce.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,re([t,e],te(r))):setTimeout.apply(void 0,re([t,e],te(r)))},clearTimeout:function(t){var e=ce.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function it(t){ce.setTimeout(function(){throw t})}function ot(){}var wr=function(){return Ae("C",void 0,void 0)}();function Dr(t){return Ae("E",void 0,t)}function Nr(t){return Ae("N",t,void 0)}function Ae(t,e,r){return{kind:t,value:e,error:r}}var fe=null;function le(t){if(ae.useDeprecatedSynchronousErrorHandling){var e=!fe;if(e&&(fe={errorThrown:!1,error:null}),t(),e){var r=fe,n=r.errorThrown,i=r.error;if(fe=null,n)throw i}}else t()}var Oe=function(t){ee(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,rt(r)&&r.add(n)):n.destination=Lr,n}return e.create=function(r,n,i){return new pe(r,n,i)},e.prototype.next=function(r){this.isStopped?Re(Nr(r),this):this._next(r)},e.prototype.error=function(r){this.isStopped?Re(Dr(r),this):(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped?Re(wr,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(ue),kr=Function.prototype.bind;function Te(t,e){return kr.call(t,e)}var Mr=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){de(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){de(n)}else de(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){de(r)}},t}(),pe=function(t){ee(e,t);function e(r,n,i){var o=t.call(this)||this,a;if(O(r)||!r)a={next:r!=null?r:void 0,error:n!=null?n:void 0,complete:i!=null?i:void 0};else{var s;o&&ae.useDeprecatedNextContext?(s=Object.create(r),s.unsubscribe=function(){return o.unsubscribe()},a={next:r.next&&Te(r.next,s),error:r.error&&Te(r.error,s),complete:r.complete&&Te(r.complete,s)}):a=r}return o.destination=new Mr(a),o}return e}(Oe);function de(t){it(t)}function Ur(t){throw t}function Re(t,e){var r=ae.onStoppedNotification;r&&ce.setTimeout(function(){return r(t,e)})}var Lr={closed:!0,next:ot,error:Ur,complete:ot},Ie=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Fr(t){return t}function Pr(t){return t.length===0?Fr:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var M=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,o=xr(e)?e:new pe(e,r,n);return le(function(){var a=i,s=a.operator,d=a.source;o.add(s?s.call(o,d):d?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=st(r),new r(function(i,o){var a=new pe({next:function(s){try{e(s)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});n.subscribe(a)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Ie]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Pr(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=st(e),new e(function(n,i){var o;r.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function st(t){var e;return(e=t!=null?t:ae.Promise)!==null&&e!==void 0?e:Promise}function Vr(t){return t&&O(t.next)&&O(t.error)&&O(t.complete)}function xr(t){return t&&t instanceof Oe||Vr(t)&&rt(t)}function jr(t){return O(t==null?void 0:t.lift)}function Q(t){return function(e){if(jr(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(t,e,r,n,i){return new $r(t,e,r,n,i)}var $r=function(t){ee(e,t);function e(r,n,i,o,a,s){var d=t.call(this,r)||this;return d.onFinalize=a,d.shouldUnsubscribe=s,d._next=n?function(c){try{n(c)}catch(p){r.error(p)}}:t.prototype._next,d._error=o?function(c){try{o(c)}catch(p){r.error(p)}finally{this.unsubscribe()}}:t.prototype._error,d._complete=i?function(){try{i()}catch(c){r.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,d}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(Oe),Br=et(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),X=function(t){ee(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var n=new ut(this,this);return n.operator=r,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new Br},e.prototype.next=function(r){var n=this;le(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=K(n.currentObservers),s=a.next();!s.done;s=a.next()){var d=s.value;d.next(r)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(r){var n=this;le(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},e.prototype.complete=function(){var r=this;le(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,a=i.isStopped,s=i.observers;return o||a?tt:(this.currentObservers=null,s.push(r),new ue(function(){n.currentObservers=null,Se(s,r)}))},e.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,a=n.isStopped;i?r.error(o):a&&r.complete()},e.prototype.asObservable=function(){var r=new M;return r.source=this,r},e.create=function(r,n){return new ut(r,n)},e}(M),ut=function(t){ee(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},e.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},e.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},e.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:tt},e}(X),Gr=new M(function(t){return t.complete()}),at=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function ct(t){return O(t==null?void 0:t.then)}function ft(t){return O(t[Ie])}function lt(t){return Symbol.asyncIterator&&O(t==null?void 0:t[Symbol.asyncIterator])}function pt(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function qr(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dt=qr();function ht(t){return O(t==null?void 0:t[dt])}function vt(t){return Ir(this,arguments,function(){var r,n,i,o;return Ze(this,function(a){switch(a.label){case 0:r=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,z(r.read())];case 3:return n=a.sent(),i=n.value,o=n.done,o?[4,z(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,z(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function _t(t){return O(t==null?void 0:t.getReader)}function Ce(t){if(t instanceof M)return t;if(t!=null){if(ft(t))return Wr(t);if(at(t))return Yr(t);if(ct(t))return Hr(t);if(lt(t))return yt(t);if(ht(t))return Jr(t);if(_t(t))return Kr(t)}throw pt(t)}function Wr(t){return new M(function(e){var r=t[Ie]();if(O(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Yr(t){return new M(function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function Hr(t){return new M(function(e){t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,it)})}function Jr(t){return new M(function(e){var r,n;try{for(var i=K(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}e.complete()})}function yt(t){return new M(function(e){zr(t,e).catch(function(r){return e.error(r)})})}function Kr(t){return yt(vt(t))}function zr(t,e){var r,n,i,o;return Rr(this,void 0,void 0,function(){var a,s;return Ze(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),r=Cr(t),d.label=1;case 1:return[4,r.next()];case 2:if(n=d.sent(),!!n.done)return[3,4];if(a=n.value,e.next(a),e.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=d.sent(),i={error:s},[3,11];case 6:return d.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Y(t,e,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=e.schedule(function(){r(),i?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(o),!i)return o}function gt(t,e){return e===void 0&&(e=0),Q(function(r,n){r.subscribe(he(n,function(i){return Y(n,t,function(){return n.next(i)},e)},function(){return Y(n,t,function(){return n.complete()},e)},function(i){return Y(n,t,function(){return n.error(i)},e)}))})}function Et(t,e){return e===void 0&&(e=0),Q(function(r,n){n.add(t.schedule(function(){return r.subscribe(n)},e))})}function Qr(t,e){return Ce(t).pipe(Et(e),gt(e))}function Xr(t,e){return Ce(t).pipe(Et(e),gt(e))}function Zr(t,e){return new M(function(r){var n=0;return e.schedule(function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())})})}function en(t,e){return new M(function(r){var n;return Y(r,e,function(){n=t[dt](),Y(r,e,function(){var i,o,a;try{i=n.next(),o=i.value,a=i.done}catch(s){r.error(s);return}a?r.complete():r.next(o)},0,!0)}),function(){return O(n==null?void 0:n.return)&&n.return()}})}function bt(t,e){if(!t)throw new Error("Iterable cannot be null");return new M(function(r){Y(r,e,function(){var n=t[Symbol.asyncIterator]();Y(r,e,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}function tn(t,e){return bt(vt(t),e)}function rn(t,e){if(t!=null){if(ft(t))return Qr(t,e);if(at(t))return Zr(t,e);if(ct(t))return Xr(t,e);if(lt(t))return bt(t,e);if(ht(t))return en(t,e);if(_t(t))return tn(t,e)}throw pt(t)}function nn(t,e){return e?rn(t,e):Ce(t)}function on(t,e){return Q(function(r,n){var i=0;r.subscribe(he(n,function(o){n.next(t.call(e,o,i++))}))})}function we(t,e){return Q(function(r,n){var i=0;r.subscribe(he(n,function(o){return t.call(e,o,i++)&&n.next(o)}))})}function sn(t){return t<=0?function(){return Gr}:Q(function(e,r){var n=0;e.subscribe(he(r,function(i){++n<=t&&(r.next(i),t<=n&&r.complete())}))})}function mt(t){t===void 0&&(t={});var e=t.connector,r=e===void 0?function(){return new X}:e,n=t.resetOnError,i=n===void 0?!0:n,o=t.resetOnComplete,a=o===void 0?!0:o,s=t.resetOnRefCountZero,d=s===void 0?!0:s;return function(c){var p=null,f=null,u=null,l=0,h=!1,v=!1,_=function(){f==null||f.unsubscribe(),f=null},g=function(){_(),p=u=null,h=v=!1},F=function(){var w=p;g(),w==null||w.unsubscribe()};return Q(function(w,U){l++,!v&&!h&&_();var D=u=u!=null?u:r();U.add(function(){l--,l===0&&!v&&!h&&(f=De(F,d))}),D.subscribe(U),p||(p=new pe({next:function(G){return D.next(G)},error:function(G){v=!0,_(),f=De(g,i,G),D.error(G)},complete:function(){h=!0,_(),f=De(g,a),D.complete()}}),nn(w).subscribe(p))})(c)}}function De(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return e===!0?(t(),null):e===!1?null:e.apply(void 0,re([],te(r))).pipe(sn(1)).subscribe(function(){return t()})}const ve="voerka-json-bigint-2022";function un(t,e){return typeof e=="bigint"?`${ve}${e.toString()}${ve}`:e}function an(t,e){return e!=null&&(typeof e=="string"&&/^\d+$/.test(e)&&Number(e)>Number.MAX_SAFE_INTEGER||typeof e=="number"&&e>Number.MAX_SAFE_INTEGER)?BigInt(e):e}function cn(t){return(e,r)=>r!=null&&(typeof r=="string"&&/^\d+$/.test(r)&&Number(r)>Number.MAX_SAFE_INTEGER||typeof r=="number"&&r>Number.MAX_SAFE_INTEGER)?t(BigInt(r)):r}class St{static parse(e,r){return JSON.parse(e,r?cn(r):an)}static stringify(e){let r=JSON.stringify(e,un);return r=r.replaceAll(`"${ve}`,"").replaceAll(`${ve}"`,""),r}}const Ne=globalThis||window||global;function fn(){const t=Object.assign({},Ne.console);return t.debug=console.log,t.fatal=console.error,t}function ln(t=[]){return function(e){const r=["debug","info","warn","error","fatal"],n={};return r.forEach(i=>{const o=e[i];n[i]=(...a)=>o.call(e,...t,...a)}),n}}function pn(t="vlogger",{prefixs:e=[],global:r=!1}={}){const n=Ne.logger||fn();return e.length?e=e.map(i=>`[${i}]`):e=[`[${t}]`],ln(e)(n),r&&(Ne[t]=n),n}var dn={name:"@voerka/messager",version:"2.4.10",description:"mqtt\u5BA2\u6237\u7AEF",files:["dist","src"],main:"dist/messager.umd.js",module:"dist/messager.es.js",types:"dist/index.d.ts",scripts:{build:"vite build"},author:{name:"sclin"},dependencies:{"args-js":"^0.10.12",flakeid:"^1.0.0",md5:"^2.3.0",mqtt:"^4.2.6",msgpack5:"^5.0.0"},devDependencies:{"@voerka/json-bigint":"2.4.8","@voerka/logger":"2.4.10",ramda:"^0.27.0",rxjs:"^7.0.1",vite:"^2.1.2"},license:"ISC"};const{name:hn,version:vn}=dn;var L=pn("mlogger",{prefixs:[`${hn}@${vn}`]});const At=Vt.default();function _n(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}function yn(t){const e=_n(t);try{JSON.parse(e)}catch{return!1}return e||!0}function gn(t,{pack:e=!1}={}){let r=t;try{r=St.stringify(t)}catch(n){L.error("JSONBig stringify",n.message)}if(e)try{r=At.encode(r)}catch(n){L.error("msgpack encode",n.message)}return r}function En(t){if(!yn(t))try{t=At.decode(t)}catch(e){L.error("msgpack decode",e.message)}try{t=St.parse(t,String)}catch(e){L.error("JSONBig parse",e.message)}return t}var Ot={exports:{}},Tt={exports:{}};(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(r,n){return r<<n|r>>>32-n},rotr:function(r,n){return r<<32-n|r>>>n},endian:function(r){if(r.constructor==Number)return e.rotl(r,8)&16711935|e.rotl(r,24)&4278255360;for(var n=0;n<r.length;n++)r[n]=e.endian(r[n]);return r},randomBytes:function(r){for(var n=[];r>0;r--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(r){for(var n=[],i=0,o=0;i<r.length;i++,o+=8)n[o>>>5]|=r[i]<<24-o%32;return n},wordsToBytes:function(r){for(var n=[],i=0;i<r.length*32;i+=8)n.push(r[i>>>5]>>>24-i%32&255);return n},bytesToHex:function(r){for(var n=[],i=0;i<r.length;i++)n.push((r[i]>>>4).toString(16)),n.push((r[i]&15).toString(16));return n.join("")},hexToBytes:function(r){for(var n=[],i=0;i<r.length;i+=2)n.push(parseInt(r.substr(i,2),16));return n},bytesToBase64:function(r){for(var n=[],i=0;i<r.length;i+=3)for(var o=r[i]<<16|r[i+1]<<8|r[i+2],a=0;a<4;a++)i*8+a*6<=r.length*8?n.push(t.charAt(o>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],i=0,o=0;i<r.length;o=++i%4)o!=0&&n.push((t.indexOf(r.charAt(i-1))&Math.pow(2,-2*o+8)-1)<<o*2|t.indexOf(r.charAt(i))>>>6-o*2);return n}};Tt.exports=e})();var ke={utf8:{stringToBytes:function(t){return ke.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(ke.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r)&255);return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}},Rt=ke;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var bn=function(t){return t!=null&&(It(t)||mn(t)||!!t._isBuffer)};function It(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function mn(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&It(t.slice(0,0))}(function(){var t=Tt.exports,e=Rt.utf8,r=bn,n=Rt.bin,i=function(o,a){o.constructor==String?a&&a.encoding==="binary"?o=n.stringToBytes(o):o=e.stringToBytes(o):r(o)?o=Array.prototype.slice.call(o,0):!Array.isArray(o)&&o.constructor!==Uint8Array&&(o=o.toString());for(var s=t.bytesToWords(o),d=o.length*8,c=1732584193,p=-271733879,f=-1732584194,u=271733878,l=0;l<s.length;l++)s[l]=(s[l]<<8|s[l]>>>24)&16711935|(s[l]<<24|s[l]>>>8)&4278255360;s[d>>>5]|=128<<d%32,s[(d+64>>>9<<4)+14]=d;for(var h=i._ff,v=i._gg,_=i._hh,g=i._ii,l=0;l<s.length;l+=16){var F=c,w=p,U=f,D=u;c=h(c,p,f,u,s[l+0],7,-680876936),u=h(u,c,p,f,s[l+1],12,-389564586),f=h(f,u,c,p,s[l+2],17,606105819),p=h(p,f,u,c,s[l+3],22,-1044525330),c=h(c,p,f,u,s[l+4],7,-176418897),u=h(u,c,p,f,s[l+5],12,1200080426),f=h(f,u,c,p,s[l+6],17,-1473231341),p=h(p,f,u,c,s[l+7],22,-45705983),c=h(c,p,f,u,s[l+8],7,1770035416),u=h(u,c,p,f,s[l+9],12,-1958414417),f=h(f,u,c,p,s[l+10],17,-42063),p=h(p,f,u,c,s[l+11],22,-1990404162),c=h(c,p,f,u,s[l+12],7,1804603682),u=h(u,c,p,f,s[l+13],12,-40341101),f=h(f,u,c,p,s[l+14],17,-1502002290),p=h(p,f,u,c,s[l+15],22,1236535329),c=v(c,p,f,u,s[l+1],5,-165796510),u=v(u,c,p,f,s[l+6],9,-1069501632),f=v(f,u,c,p,s[l+11],14,643717713),p=v(p,f,u,c,s[l+0],20,-373897302),c=v(c,p,f,u,s[l+5],5,-701558691),u=v(u,c,p,f,s[l+10],9,38016083),f=v(f,u,c,p,s[l+15],14,-660478335),p=v(p,f,u,c,s[l+4],20,-405537848),c=v(c,p,f,u,s[l+9],5,568446438),u=v(u,c,p,f,s[l+14],9,-1019803690),f=v(f,u,c,p,s[l+3],14,-187363961),p=v(p,f,u,c,s[l+8],20,1163531501),c=v(c,p,f,u,s[l+13],5,-1444681467),u=v(u,c,p,f,s[l+2],9,-51403784),f=v(f,u,c,p,s[l+7],14,1735328473),p=v(p,f,u,c,s[l+12],20,-1926607734),c=_(c,p,f,u,s[l+5],4,-378558),u=_(u,c,p,f,s[l+8],11,-2022574463),f=_(f,u,c,p,s[l+11],16,1839030562),p=_(p,f,u,c,s[l+14],23,-35309556),c=_(c,p,f,u,s[l+1],4,-1530992060),u=_(u,c,p,f,s[l+4],11,1272893353),f=_(f,u,c,p,s[l+7],16,-155497632),p=_(p,f,u,c,s[l+10],23,-1094730640),c=_(c,p,f,u,s[l+13],4,681279174),u=_(u,c,p,f,s[l+0],11,-358537222),f=_(f,u,c,p,s[l+3],16,-722521979),p=_(p,f,u,c,s[l+6],23,76029189),c=_(c,p,f,u,s[l+9],4,-640364487),u=_(u,c,p,f,s[l+12],11,-421815835),f=_(f,u,c,p,s[l+15],16,530742520),p=_(p,f,u,c,s[l+2],23,-995338651),c=g(c,p,f,u,s[l+0],6,-198630844),u=g(u,c,p,f,s[l+7],10,1126891415),f=g(f,u,c,p,s[l+14],15,-1416354905),p=g(p,f,u,c,s[l+5],21,-57434055),c=g(c,p,f,u,s[l+12],6,1700485571),u=g(u,c,p,f,s[l+3],10,-1894986606),f=g(f,u,c,p,s[l+10],15,-1051523),p=g(p,f,u,c,s[l+1],21,-2054922799),c=g(c,p,f,u,s[l+8],6,1873313359),u=g(u,c,p,f,s[l+15],10,-30611744),f=g(f,u,c,p,s[l+6],15,-1560198380),p=g(p,f,u,c,s[l+13],21,1309151649),c=g(c,p,f,u,s[l+4],6,-145523070),u=g(u,c,p,f,s[l+11],10,-1120210379),f=g(f,u,c,p,s[l+2],15,718787259),p=g(p,f,u,c,s[l+9],21,-343485551),c=c+F>>>0,p=p+w>>>0,f=f+U>>>0,u=u+D>>>0}return t.endian([c,p,f,u])};i._ff=function(o,a,s,d,c,p,f){var u=o+(a&s|~a&d)+(c>>>0)+f;return(u<<p|u>>>32-p)+a},i._gg=function(o,a,s,d,c,p,f){var u=o+(a&d|s&~d)+(c>>>0)+f;return(u<<p|u>>>32-p)+a},i._hh=function(o,a,s,d,c,p,f){var u=o+(a^s^d)+(c>>>0)+f;return(u<<p|u>>>32-p)+a},i._ii=function(o,a,s,d,c,p,f){var u=o+(s^(a|~d))+(c>>>0)+f;return(u<<p|u>>>32-p)+a},i._blocksize=16,i._digestsize=16,Ot.exports=function(o,a){if(o==null)throw new Error("Illegal argument "+o);var s=t.wordsToBytes(i(o,a));return a&&a.asBytes?s:a&&a.asString?n.bytesToString(s):t.bytesToHex(s)}})();var Sn=Ot.exports;String.prototype.toVoerkaTopic=function(t){const e=/\{\w*\}/g;let r=this;if(t=Object.assign({tid:0},t),t.tid&&(r.indexOf("%{tid}%")>-1||(r=r.replace("{domain}","{domain}/%{tid}%"))),Array.isArray(t)){let n=0;for(let i of r.match(e)||[])n<t.length&&(r=r.replace(i,t[n]),n+=1)}else if(typeof t=="object")for(let n in t)r=r.replace("{"+n+"}",t[n]);return r};const C={DEVICE:"/voerka/{domain}/devices/{sn}/#",REGISTER:"/voerka/{domain}/register",NOTIFY:"/voerka/{domain}/devices/{sn}/notify",ATTRS:"/voerka/{domain}/devices/{sn}/attrs",STATUS:"/voerka/{domain}/devices/{sn}/status",ACTIONS:"/voerka/{domain}/devices/{sn}/actions",ALARMS:"/voerka/{domain}/devices/{sn}/alarms",EVENTS:"/voerka/{domain}/devices/{sn}/events",EVENTS_STATUS:"/voerka/{domain}/devices/{sn}/status",MESSAGE:"/voerka/{domain}/devices/{sn}/message",DATA:"/voerka/{domain}/devices/{sn}/data",QUERY:"/voerka/{domain}/devices/{sn}/query",BROADCAST:"/voerka/{domain}/broadcast/{group}",ANSWER:"/voerka/{domain}/devices/{sn}/answer",DEVICE_GROUP:"/voerka/{domain}/+/groups/{group}/#",NOTIFY_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$$notify",ATTRS_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$$attrs",STATUS_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$$status",ACTIONS_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$$actions",ALARMS_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$$alarms",EVENTS_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$$events",EVENTS_STATUS_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$status",MESSAGE_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$$message",DATA_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$$data",QUERY_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$$query",ANSWER_GROUP:"/voerka/{domain}/%{tid}%/groups/{group}/$$answer",RESOURCE:"/voerka/{domain}/rs/{type}/{id}",RESOURCE_SUB:"/voerka/{domain}/rs/{type}/{id}/{sub_type}/{sub_id}"},H={REGISTER:0,NOTIFY:1,ATTRS:2,STATUS:3,ACTIONS:4,ALARMS:5,EVENTS:6,MESSAGE:7,DATA:8,QUERY:9,BROADCAST:10,ANSWER:11},B={DEVICE_READY:1e3,DEVICE_STATUS_CHANGED:1001,DEVICE_ATTRS_CHANGED:1002,DEVICE_TRANS_PROGRESS:1003,DEVICE_BEFORE_SHUTDOWN:1004,DEVICE_ALARM_CANCELLED:1005,DEVICE_ALARM_HANDLED:1006,DEVICE_REPORT:1007,RESOURCE_CREATED:3001,RESOURCE_UPDATED:3002,RESOURCE_DELETED:3003,RESOURCE_PUSHED:3004,RESOURCE_POPED:3005,RESOURCE_MOVED:3006,RESOURCE_JUMPED:3007,RESOURCE_SWAPED:3008,IO_KEY:4e3,APPLICATION_CALL:8e4},An={DEVICE_CHECK:1e3,DEVICE_SCREEN_ABNORMAL:1001,DEVICE_LOW_BATTERY:1002,DEVICE_MODULE_ABNORMAL:1003,DEVICE_INSUFFICIENT_STORAGE:1004,DEVICE_FIRMWARE_UPGRADE_FAILED:1005,DEVICE_LOG_FULL:1006,DEVICE_UNABLE_CONNECT_LOG_SERVER:1007,DEVICE_REMOTE_DEBUG:1008,DEVICE_INSUFFICIENT_MEMORY:1009,DEVICE_CPU_OVER_LOAD:1010,DEVICE_SUB_DEVICE_REGISTER_FAILED:1011,DEVICE_POWER_DISCONNECTED:1012,DEVICE_ANTI_DISMANTLING:1013},On={DEVICE_CHECK:4,DEVICE_SCREEN_ABNORMAL:3,DEVICE_LOW_BATTERY:4,DEVICE_MODULE_ABNORMAL:1,DEVICE_INSUFFICIENT_STORAGE:3,DEVICE_FIRMWARE_UPGRADE_FAILED:3,DEVICE_LOG_FULL:5,DEVICE_UNABLE_CONNECT_LOG_SERVER:3,DEVICE_REMOTE_DEBUG:1,DEVICE_INSUFFICIENT_MEMORY:5,DEVICE_CPU_OVER_LOAD:3,DEVICE_SUB_DEVICE_REGISTER_FAILED:2,DEVICE_POWER_DISCONNECTED:3,DEVICE_ANTI_DISMANTLING:3},Tn={RECEIVED:100,OK:200,OK_DOING:201,OK_DONE:200,ERROR:500,PERMISSION_DENIED:501,COMMUNICATION:502,UNKNOWN_COMMAND:503,REJECTED:504,INSUFFICIENT:505},ne={INITIAL:0,HANDLING:1,SUSPENDED:2,RESUMED:3,COMPLETED:10,NOT_SERVICED:11,IGNORED:12,TRANSFERRED:13,REJECTED:14,TIMEOUT:15,MISTAKE:16,ERROR:19},Rn={TODO:0,PROGRESSING:1,COMPLETED:2};function Ct(t={},e={}){return W({type:0,from:"",to:"",sid:0,timestamp:Date.now(),token:"",tid:0,flags:{},payload:{}},t)}function wt(t={}){return t.from&&t.timestamp?(Sn(t.from+t.timestamp)+"").toLowerCase():Date.now()+""}function Me(t,e,r){for(var n=[],i=Math.max(t.length,e.length),o=0,a=0;a<i||o;){var s=a<t.length?t[a]:0,d=a<e.length?e[a]:0,c=o+s+d;n.push(c%r),o=Math.floor(c/r),a++}return n}function Dt(t,e,r){if(t<0)return null;if(t==0)return[];for(var n=[],i=e;t&1&&(n=Me(n,i,r)),t=t>>1,t!==0;)i=Me(i,i,r);return n}function In(t,e){for(var r=t.split(""),n=[],i=r.length-1;i>=0;i--){var o=parseInt(r[i],e);if(isNaN(o))return null;n.push(o)}return n}function Cn(t,e,r){var n=In(t,e);if(n===null)return null;for(var i=[],o=[1],a=0;a<n.length;a++)n[a]&&(i=Me(i,Dt(n[a],o,r),r)),o=Dt(e,o,r);for(var s="",a=i.length-1;a>=0;a--)s+=i[a].toString(r);return s}function wn(t){return t.substring(0,2)==="0x"&&(t=t.substring(2)),t=t.toLowerCase(),Cn(t,16,10)}class Dn{constructor(e){e=e||{},this.seq=0,this.mid=(e.mid||1)%1023,this.timeOffset=e.timeOffset||0,this.lastTime=0}gen(){const e=Date.now(),r=(e-this.timeOffset).toString(2);this.lastTime==e?(this.seq++,this.seq>4095&&(this.seq=0)):this.seq=0,this.lastTime=e;let n=this.seq.toString(2),i=this.mid.toString(2);for(;n.length<12;)n="0"+n;for(;i.length<10;)i="0"+i;const o=r+i+n;let a="";for(let s=o.length;s>0;s-=4)a=parseInt(o.substring(s-4,s),2).toString(16)+a;return wn(a)}}const Nn=Sr((t,e)=>e||t);function kn(t="",e,r){return e?r=="left"?t.replace(new RegExp("^\\"+e+"+","g"),""):r=="right"?t.replace(new RegExp("\\"+e+"+$","g"),""):t.replace(new RegExp("^\\"+e+"+|\\"+e+"+$","g"),""):t.replace(/^\s+|\s+$/g,"")}function Nt(){if(!this.voerka){this._sid=1;const{voerka:e={}}=this._options.master;this.voerka=this._getOptions(e)}this.answerObservable=this.getTopicObservable(C.ANSWER.toVoerkaTopic(this.voerka));const t=C.DEVICE.toVoerkaTopic(this.voerka);this.subscribe(t),this.voerka.subscriptions.forEach(e=>{e=e.toVoerkaTopic(this.voerka),e!==t&&this.subscribe(e)}),this._tidGenerator=new Dn(this.voerka.flake),L.info("subscriptions",this.subscriptions)}var Mn={name:"voerka",setup:Nt,_getOptions(t={}){return W({sn:"voerka_demo1",domain:"hispro",group:"",sessionTimeout:30*1e3,bufferMax:100,flake:{},subscriptions:[]},t)},update(t){this._assertMaster();let{voerka:e={}}=t;e=this._getOptions(e);const r=["sn","domain","subscriptions"],n=r.some(i=>!Ke(e[i],this.voerka[i]));this.voerka=e,n&&(L.info("subscriptions",this.subscriptions),L.warn(`key option: [${r}] updated, Resubscribe!!!`),this.subscriptions.forEach(i=>{this.unsubscribe(i)}),Nt.call(this))},_createMessageInSubject(){this._messageBuffer={},this._messageIdList=[];const t=e=>{this._messageIdList.length>=this.voerka.bufferMax&&delete this._messageBuffer[this._messageIdList.shift()],this._messageIdList.push(e),this._messageBuffer[e]=!0};return new X().pipe(on(e=>(e.message.id=wt(e.message),e)),we(e=>{const{id:r}=e.message;return r in this._messageBuffer?!1:(t(r),!0)}),mt())},defineMessage(t={},e={}){return Ct(W({from:this.voerka.sn},t),e)},publishMessage(t,e={},r={}){this._assertMaster();const{timeout:n=this.voerka.sessionTimeout}=r;return e.sid===!0&&(e.sid=this._sid++),e.tid===!0&&(e.tid=this.genTid()),t=this.getTopic(t,e),isNaN(e.sid)||Number(e.sid)===0?this.publish(t,e,r):new Promise((i,o)=>{let a=!1,s;const d=this.answerObservable.subscribe(c=>{const p=c.message||{};String(p.sid)===String(e.sid)&&!a&&(a=!0,d.unsubscribe(),s&&clearTimeout(s),i(p))});s=setTimeout(()=>{d&&d.unsubscribe(),a||(a=!0,o(new Error("Timeout")))},n),this.publish(t,e,r)})},postRegister(t={}){},postNotify(t={}){},postAlarm(t={},e={},r={}){const n=t.group?C.ALARMS_GROUP:C.ALARMS;return this.publishMessage(n,this.defineMessage(j(V({},t),{type:H.ALARMS,payload:e})),r)},postEvent(t={},e={},r={}){const n=e.code===B.DEVICE_STATUS_CHANGED?t.group?C.EVENTS_STATUS_GROUP:C.EVENTS_STATUS:t.group?C.EVENTS_GROUP:C.EVENTS;return this.publishMessage(n,this.defineMessage(j(V({},t),{type:H.EVENTS,payload:e})),r)},postMessage(t={}){},postData(t={}){},postQuery(t={}){},postBroadcast(t={}){},postAnswer(t={},e={},r={}){return this.publish(this.getTopic(C.ANSWER,t),this.defineMessage(j(V({},t),{type:H.ANSWER,payload:e})),r)},postAction(t={},e={},r={}){return this.publishMessage(C.ACTIONS,this.defineMessage(j(V({},t),{type:H.ACTIONS,payload:e})),r)},postAttrs(t={},e={},r){return this.publishMessage(C.ATTRS,this.defineMessage(j(V({},t),{type:H.ATTRS,payload:e})),r)},postResEvent(t,e={},r={},n={},i){const{type:o,sub_type:a,sub_id:s}=e,d=a&&s?C.RESOURCE_SUB:C.RESOURCE;return this.publishMessage(d.toVoerkaTopic(e),this.defineMessage(j(V({},n),{type:H.EVENTS,payload:{code:t,resType:a||o,res:r}})),i)},postResCreated(...t){return this.postResEvent(B.RESOURCE_CREATED,...t)},postResUpdated(...t){return this.postResEvent(B.RESOURCE_UPDATED,...t)},postResDeleted(...t){return this.postResEvent(B.RESOURCE_DELETED,...t)},upgradeDevice(t,e={}){return this.postAction({to:t,sid:!0},V({action:"upgrade"},e))},setDeviceAttrs(t,e={}){return this.postAttrs({to:t,sid:!0},e)},setTransactionProgress(t,o={},i){var a=o,{progress:e=10,result:r=ne.HANDLING}=a,n=ye(a,["progress","result"]);return this.postEvent(t,j(V({},n),{code:B.DEVICE_TRANS_PROGRESS,progress:e,result:r}),i)},handleAlarm(t,o={},i){var a=o,{remarks:e="",result:r=ne.NOT_SERVICED}=a,n=ye(a,["remarks","result"]);r=r>=ne.COMPLETED?r:ne.COMPLETED;const s=Number(r)%2===1?B.DEVICE_ALARM_CANCELLED:B.DEVICE_ALARM_HANDLED;return this.postEvent(t,j(V({},n),{code:s,remarks:e,result:r}),i)},genTid(){return this._tidGenerator.gen().toString()},getTopic(t,e={}){const{to:r,domain:n,group:i,tid:o}=e;return t.toVoerkaTopic(Nn(this.voerka,{sn:r,domain:n,group:kn(i,"/"),tid:o}))}};const Un=globalThis||window||global,ie="master";function oe(t){this._client=this._clients[t]||this._master}const Ln=dr((t,e)=>tr(e)?e:t(e));class R{constructor(e={}){this._clients={},this._master=null,this._client=null,this._clientOptions={},this._statusSubject=new X,this._interceptors=[n=>(n.message=gn(n.message,{pack:this.msgpack}),n),this._statistics],this._options=W({name:"vmessager",MQTT:Pt.default,autoConnect:!0,base:{msgpack:!1},clients:{},master:{onConection:null,defineInSubject:null,defineOutSubject:null}},e),this._options.autoConnect&&this.connect(),oe.prototype=this,oe.prototype.constructor=oe;const r=this._options.name;r&&(Un[r]=this),L.info(r,"created")}get MQTT(){return this._options.MQTT}get name(){var e;return(e=this._client)==null?void 0:e._v_name}get status(){var e;return(e=this._client)==null?void 0:e._v_status}get isMaster(){return this.name===ie}get connected(){var e;return(e=this._client)==null?void 0:e.connected}get reconnecting(){var e;return(e=this._client)==null?void 0:e.reconnecting}get url(){var e;return(e=this._client)==null?void 0:e.options.url}get clientId(){var e;return(e=this._client)==null?void 0:e.options.clientId}get msgpack(){var e;return(e=this._client)==null?void 0:e.options.msgpack}get subscriptions(){var r;const e=((r=this._client)==null?void 0:r._resubscribeTopics)||{};return Object.keys(e)}_assert(e,r=""){if(typeof e=="function"){if(!e())throw new Error(r)}else if(!e)throw new Error(r)}_assertMaster(){this._assert(()=>!(this instanceof oe),"Should use in master client")}_assertClient(){this._assert(()=>this._client,"Client has ended")}_setup(){Object.values(R.setups).forEach(r=>{r.call(this)})}use(e,r){return this._assertMaster(),new oe(e,r)}_createMessageOutSubject(){return new X().pipe(mt())}_createMessageInSubject(){return new X}_createClientAndWatch(e,r,n){const{defineInSubject:i,defineOutSubject:o,onConection:a}=r;this._assert(()=>r.url&&typeof r.url=="string","Client require url"),L.info("messager options",r);const s=this.MQTT.connect(r.url,r);if(s._v_options=r,s._v_name=e,s._v_status="",n)s._v_info=n._v_info,s._v_out_subject=n._v_out_subject,n._v_out_subscription&&n._v_out_subscription.unsubscribe(),s._v_out_subscription=s._v_out_subject.subscribe(c=>{const{topic:p,message:f,options:u,callback:l}=c;s.publish(p,f,u,l)}),s._v_subject=n._v_subject,s._v_observables=n._v_observables;else{s._v_info={};let c=this._createMessageOutSubject();o&&(c=o(c)),s._v_out_subject=c,s._v_out_subscription=c.subscribe(f=>{const{topic:u,message:l,options:h,callback:v}=f;s.publish(u,l,h,v)});let p=this._createMessageInSubject();i&&(p=i(p)),s._v_subject=p,s._v_observables=[]}const d=(c,p)=>{s._v_ended||(s._v_status=c,this._statusSubject.next({name:e,status:c,error:p}),L.info(e,c,p))};return s.on("connect",c=>{d("connect")}),s.on("disconnect",c=>{d("disconnect")}),s.on("reconnect",()=>{d("reconnect")}),s.on("close",()=>{d("close")}),s.on("error",c=>{d("error",c.message)}),s.on("offline",c=>{d("offline")}),s.on("message",(c,p,f)=>{s._v_subject.next({topic:c,message:En(p),packet:f})}),e===ie&&(this._master=s,this._client=s),this._setup(),a&&a(this),s}_statistics(e){return e}update(e={}){e=W(this._client._v_options,e);const r=Or(["url","clientId"]),n=!Ke(r(e),r(this._client._v_options));this._client._v_options=e,n&&(this.end(!1),this._createClientAndWatch(this.name,e,this._client)),Object.values(R.updates).forEach(i=>{i&&i.call(this,e)})}_getClientOptions(e){const{base:r,master:n,clients:i}=this._options;let o;return!e||e===ie?o=W(r,n):o=W(r,i[e]||{}),o}connect(){this._assertMaster(),this._createClientAndWatch(ie,this._getClientOptions(ie))}end(e=!0,...r){var i,o;this._assertClient(),e&&((i=this._client._v_subject)==null||i.complete(),(o=this._client._v_out_subject)==null||o.complete());const n=this._client.end(...r);return this._clientOptions[this.name]=this._client._v_options,this._client._v_ended=!0,n}on(...e){return this._assertClient(),this._client.on(...e)}publish(){this._assertClient();let e=x([{topic:x.STRING|x.Required},{message:x.OBJECT|x.Required},{options:x.OBJECT|x.Optional},{callback:x.FUNCTION|x.Optional}],arguments);const{topic:r,message:n,options:i={}}=e,{straight:o=!1}=i;return o&&this._client._v_subject.next({topic:r,message:n,packet:null}),e=Ln(this._interceptors)(e),this._client._v_out_subject.next(e),{topic:r,message:n}}onMessage(e){return this._assertClient(),typeof e=="function"&&(e={next:e}),this._client._v_subject.subscribe(e)}onStatus(e){return this._assertClient(),typeof e=="function"&&(e={next:e}),this._statusSubject.subscribe(e)}getObservable(e=[]){if(this._assertClient(),e&&e.length){const r=this._client._v_subject.pipe(...e);return this._client._v_observables.push(r),r}}getTopicObservable(e=""){if(!e)return;let r;return typeof e=="string"?r=({topic:n})=>n.endsWith(e):e instanceof RegExp?r=({topic:n})=>e.test(n):typeof e=="function"&&(r=({topic:n})=>e(n)),this.getObservable([we(r)])}getMessageObservable(e=()=>!0){const r=({message:n})=>e(n);return this.getObservable([we(r)])}subscribe(...e){return this._assertClient(),this._client.subscribe(...e)}unsubscribe(...e){return this._assertClient(),this._client.unsubscribe(...e)}reconnect(...e){return this._assertClient(),this._client.reconnect(...e)}useInterceptors(e){L.warn('"useInterceptors" has deprecated at ^2.4.6 !!! Plase use "defineOutSubject" instead.'),typeof e=="function"&&this._interceptors.unshift(e)}}R.prototype._createMessageInSubject._replaceable=!0,R.setups={},R.updates={},R.use=function(t={}){const o=t,{name:e,setup:r,update:n}=o,i=ye(o,["name","setup","update"]);!e||R.setups[e]||(R.setups[e]=r,R.updates[e]=n,Object.keys(i).forEach(a=>{(!R.prototype.hasOwnProperty(a)||R.prototype[a]._replaceable)&&(R.prototype[a]=i[a])}))},R.use(Mn),y.ALARM_CODE=An,y.ALARM_LEVEL=On,y.EVENT_CODE=B,y.MESSAGE_TYPE=H,y.RESPONSE_CODE=Tn,y.TOPICS=C,y.TRANSACTION_RESULT=ne,y.TRANSACTION_STATUS=Rn,y.default=R,y.defineMessage=Ct,y.getMessageId=wt,Object.defineProperties(y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
