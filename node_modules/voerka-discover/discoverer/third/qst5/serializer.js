const { msgStructBufferDeserialize: descrialize } = require('protocols/serializers');

const { Qts5MessageBase } = require('./message');

// 将 json 数据序列化 qts5 消息
function qts5MsgStructBufferSerialize(message) {
	return message.toStructBuffer();
}

// 反序列化 qts5 消息到 json 数据
function qts5MsgStructBufferDeserialize(data) {
    let { cmdType } = descrialize(Qts5MessageBase, data);
    let Message = Qts5MessageBase.getMessageByCmdType(cmdType);
    return descrialize(Message, data);
}

module.exports = {
    qts5MsgStructBufferSerialize,
    qts5MsgStructBufferDeserialize,
};
